'use strict';

/**
 * Override a value with supplied environment variable if present.
 *
 * @param {String} envname The env key name.
 * @param {any} value The value to use if key is not present.
 * @param {Function} coerce Function to do manipulation of env value and given value.
 * @return {any} Either the env value or the given value according the presence.
 */
function envOverride(envname, value, coerce) {
	if (process.env[envname] && process.env[envname].length) {
		if (coerce) {
			try {
				return coerce(process.env[envname], value);
			} catch (e) {
				return value;
			}
		}
		return process.env[envname];
	}
	return value;
}
exports.envOverride = envOverride;

function copyInstance(original) {
	return Object.assign(Object.create(Object.getPrototypeOf(original)), original);
}
exports.copyInstance = copyInstance;
